{
  "id": "window",
  "label": "Crop Pollination",
  "targetScript": "natcap.invest.pollination",
  "modelName": "pollination",
  "localDocURI": "../documentation/croppollination.html",
  "condenseElements": true,
  "height": 700,
  "width": 700,
  "elements": [
    {
      "id": "workspace_list",
      "type": "list",
      "elements": [
        {
          "id": "workspace",
          "args_id": "workspace_dir",
          "type": "folder",
          "label": "Workspace",
          "defaultValue": "~/Documents/pollination_workspace",
          "required": true,
          "validateAs": {
            "type": "folder",
            "permissions": "rwx"
          },
          "helpText": "The selected folder is used as the workspace where all intermediate and output files will be written.<br><br>If the selected folder does not exist, it will be created.<br><br><b>If datasets already exist in the selected folder, they will be overwritten.</b>"
        },
        {
          "id": "results_suffix",
          "type": "text",
          "label": "Results Suffix (Optional)",
          "args_id": "results_suffix",
          "required": false,
          "width": 120,
          "dataType": "string",
          "helpText": "Optional.  The results suffix will be appended to the end of all output filenames."
        },
        {
          "id": "landcover_raster_path",
          "args_id": "landcover_raster_path",
          "type": "file",
          "label": "Land Cover Map (Raster)",
          "defaultValue": "../pollination/landcover.tif",
          "required": true,
          "validateAs": {
            "type": "GDAL"
          },
          "helpText": "This is the landcover map that's used to map biophyiscal properties about habitat and floral resources of landcover types to a spatial layout."
        },
        {
          "id": "landcover_biophysical_table_path",
          "type": "file",
          "label": "Land Cover Biophysical Table (CSV)",
          "args_id": "landcover_biophysical_table_path",
          "required": true,
          "defaultValue": "../pollination/landcover_biophysical_table.csv",
          "validateAs": {
            "type": "CSV",
            "fieldsExist": [
              "lucode"
            ]
          },
          "helpText": "A CSV table mapping landcover codes in the landcover raster to indexes of nesting availability for each nesting substrate referenced in guilds table as well as indexes of abundance of floral resources on that landcover type per season in the bee activity columns of the guild table.<br/>All indexes are in the range [0.0, 1.0].<br/>Columns in the table must be at least<br/>* 'lucode': representing all the unique landcover codes in the raster st `args['landcover_path']`<br/>* For every nesting matching _NESTING_SUITABILITY_PATTERN in the guild stable, a column matching the pattern in `_LANDCOVER_NESTING_INDEX_HEADER`.<br/>* For every season matching _FORAGING_ACTIVITY_PATTERN in the guilds table, a column matching the pattern in `_LANDCOVER_FLORAL_RESOURCES_INDEX_HEADER`."
        },
        {
          "id": "guild_table_path",
          "type": "file",
          "label": "Guild Table (CSV)",
          "args_id": "guild_table_path",
          "required": true,
          "defaultValue": "../Pollination/Input/LU.csv",
          "validateAs": {
            "type": "CSV",
            "fieldsExist": [
              "species", "alpha", "relative_abundance"
            ]
          },
          "helpText": "A table indicating the bee species to analyze in this model run.  Table headers must include:<br/>* 'species': a bee species whose column string names will be referred to in other tables and the model will output analyses per species.<br/> * any number of columns matching _NESTING_SUITABILITY_PATTERN with values in the range [0.0, 1.0] indicating the suitability of the given species to nest in a particular substrate.<br/>* any number of _FORAGING_ACTIVITY_PATTERN columns with values in the range [0.0, 1.0] indicating the relative level of foraging activity for that species during a particular season.<br/>* 'alpha': the sigma average flight distance of that bee species in meters.<br/>* 'relative_abundance': a weight indicating the relative abundance of the particular species with respect to the sum of all relative abundance weights in the table."
        },
        {
          "id": "farm_vector_path",
          "args_id": "farm_vector_path",
          "type": "file",
          "label": "Farm Vector (Vector) (optional)",
          "defaultValue": "../pollination/farms.shp",
          "required": false,
          "validateAs": {
            "type": "OGR",
            "layers": [
              {
                "name": {
                  "inheritFrom": "file"
                },
                "type": "polygons"
              }
            ],
            "fieldsExist": [
              "crop_type", "half_sat", "season", "p_managed", "p_dep"
            ]
          },
          "helpText": "This is a layer of polygons representing farm sites to be analyzed.  The shapefile must have at least the following fields:<br/><br/>* season (string): season in which the farm needs pollination.<br/>* half_sat (float): a real in the range [0.0, 1.0] representing the proportion of wild pollinators to achieve a 50% yield of that crop.<br/>* p_wild_dep (float): a number in the range [0.0, 1.0] representing the proportion of yield dependent on pollinators.<br/>* p_managed (float): proportion of pollinators that come from non-native/managed hives.<br/>* f_[season] (float): any number of fields that match this pattern such that `season` also matches the season headers in the biophysical and guild table.  Any areas that overlap the landcover map will replace seasonal floral resources with this value.  Ranges from 0..1.<br/>* n_[substrate] (float): any number of fields that match this pattern such that `substrate` also matches the nesting substrate headers in the biophysical and guild table.  Any areas that overlap the landcover map will replace nesting substrate suitability with this value.  Ranges from 0..1."
        }
      ]
    }
  ]
}
